# Character Forge V7.2

一个基于 AI 的角色生成工具，通过 5 步流程创建详细的角色档案。

## 特点

- 🎨 **5 步创建流程**：基础档案 → 外貌 → 心理 → 深度细化 → 报告生成
- 🤖 **AI 辅助生成**：DeepSeek API 驱动的智能内容生成
- 🔄 **人机协作**：Step 4 采用全新的交互式问答流程
- 📝 **灵活修改**：支持小改（直接编辑）和大改（给 AI 提建议）
- 📊 **多种报告格式**：小说、TRPG、档案、访谈、日记、医疗档案
- 📸 **照片上传**：为角色添加照片，支持多格式导出
- 💾 **多格式导出**：TXT、Markdown、PNG 图片、复制文本
- ✅ **必填项验证**：确保关键信息完整（姓名、职业）
- 📦 **分级导出**：基础版（Step 3）和完整版（Step 5）两种导出等级

## 快速开始

1. 打开 `index.html`
2. 按照 5 个步骤填写信息
3. 在 Step 5 生成报告

详细使用方法请查看 [docs/使用指南.md](docs/使用指南.md)

## Step 4 新交互流程

Step 4 采用全新的 5 步人机协作流程：

```
1. AI 问问题 → 你简要回答
2. AI 根据你的回答生成详细内容
3. 你查看内容，选择满意/不满意
4. 如果不满意，选择修改方式：
   📝 小改：直接修改文本
   💬 大改：给 AI 提建议
5. 通过，进入下一题
```

这是一个真正的"人机协作"流程，让你和 AI 共同创造角色的深度细节。

## 文件结构

```
Character Forge/
├── index.html              # 主程序
├── README.md               # 项目说明
├── docs/                   # 文档目录
│   ├── 使用指南.md         # 完整使用说明
│   ├── 快速参考.txt        # 快速参考卡
│   ├── 导出功能说明.md     # 导出功能详细说明
│   ├── 动画效果说明.md     # 动画系统说明
│   ├── 性能优化说明.md     # 性能优化记录
│   ├── 开发者模式说明.md   # 开发者模式使用
│   └── CHANGELOG.md        # 更新日志
└── tests/                  # 测试工具目录
    ├── test-step4.html     # Step 4 交互流程测试
    ├── test-api.html       # API 连接测试
    ├── test-render.html    # 渲染功能测试
    ├── test-export.html    # 导出功能测试
    └── quick-test.html     # 快速功能验证
```

## API 配置

### 方式 1: 开发者模式（测试/演示）
适合开发者和测试人员快速体验：
1. 打开"API 设置"
2. 点击"开发者模式"
3. 输入密码：`131313`
4. 自动配置完成

详细说明：[docs/开发者模式说明.md](docs/开发者模式说明.md)

### 方式 2: 使用自己的 API（推荐）
适合正式使用：
1. 选择服务商（OpenAI、Gemini、DeepSeek）
2. 输入你的 API Key
3. 测试并保存

**获取 API Key**：
- OpenAI: https://platform.openai.com/api-keys
- Google Gemini: https://aistudio.google.com/app/apikey
- DeepSeek: https://platform.deepseek.com/api_keys

## 系统要求

- 现代浏览器（Chrome、Firefox、Edge、Safari）
- 网络连接（用于 AI API 调用）
- 无需安装，直接打开 HTML 文件即可使用

## 版本历史

### V7.2 (当前)
- 🔄 **优化导出系统**：
  - 保存照片数据（Base64 格式）
  - 保存当前步骤位置
  - 保存 Step 4 完整状态（问题列表、当前索引）
  - 优化文件命名（使用可读时间格式）
- 🔄 **优化导入系统**：
  - 完整恢复照片
  - 智能步骤跳转（可选择是否跳转到保存的步骤）
  - 完整恢复 Step 4 状态
  - 更详细的导入提示（显示是否含照片）
- 🎨 **Toast 提示系统**：统一的提示函数，支持多种颜色
- 📝 **数据完整性**：确保导出/导入零信息丢失

### V7.1
- ✅ **必填项验证**：姓名和职业设为必填，确保信息完整
- 📦 **分级导出系统**：
  - 基础版（Step 3）：仅包含基础信息，适合快速备份
  - 完整版（Step 5）：包含所有 AI 生成内容，适合完整存档
- 🔔 **智能提示**：导出/导入时显示 Toast 提示，清晰反馈操作结果
- ✨ 照片上传功能（128x128px）
- 📤 多格式导出：TXT、Markdown、PNG、复制文本
- 🎨 预览面板图标优化（Font Awesome）
- ⚡ 全面优化动画性能（CPU -60%, FPS +33%）
- 🚀 启用硬件加速
- 🎯 简化动画效果，缩短动画时长

### V7.0
- 全新的 Step 4 交互流程
- 支持小改和大改两种修改方式
- 可以多次迭代优化
- 完整的导出/导入功能
- 开发者模式

### V6.1
- Step 4 自动生成深度细节
- 多选功能
- 基础导出/导入

详细更新记录请查看 [docs/CHANGELOG.md](docs/CHANGELOG.md)

## 使用技巧

### Step 4 最佳实践

**写好简要回答**：
- ✅ 简单描述即可，AI 会帮你扩展
- ✅ 例如："五年前在战斗中受伤"

**选择修改方式**：
- 📝 小改：内容基本满意，只需微调
- 💬 大改：需要改变方向或增加内容

**写好修改建议**：
- ✅ 具体明确："增加更多情感描写"
- ❌ 太模糊："改一下"

## 常见问题

**Q: 为什么必须填写姓名和职业？**  
A: 这两项是角色的核心标识，确保导出文件命名和角色定位清晰

**Q: 基础版和完整版有什么区别？**  
A: 基础版（Step 3）仅包含基础信息，完整版（Step 5）包含所有 AI 生成内容

**Q: 什么时候应该导出基础版？**  
A: 完成 Step 3 后，想快速备份角色框架或分享基础设定时

**Q: Step 4 没有生成问题？**  
A: 需要在 Step 2/3 选择特殊选项（如疤痕、创伤、物品等）

**Q: AI 生成失败？**  
A: 使用 `tests/test-api.html` 测试 API 连接

**Q: 可以多次修改吗？**  
A: 可以，"大改"可以反复生成直到满意

更多问题请查看 [docs/使用指南.md](docs/使用指南.md)

## 测试

推荐测试顺序：
1. `tests/test-step4.html` - 快速体验 Step 4 流程（5分钟）
2. `index.html` - 完整流程测试（20分钟）

## 技术栈

- HTML5 + JavaScript (Vanilla)
- Tailwind CSS (CDN)
- Font Awesome (CDN)
- DeepSeek API

## 许可

本项目仅供学习和个人使用。

---

**开始创造你的角色吧！** 🎉

详细使用方法请查看 [docs/使用指南.md](docs/使用指南.md)
